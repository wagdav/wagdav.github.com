<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />

  <title>My blogging workflow with git</title>

  <link rel="stylesheet" href="../../../../../theme/css/main.css" />

  <link href="https://thewagner.net/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="The Wagner Atom Feed" />


</head>

<body id="index" class="home">
  <header id="banner" class="body">
    <a href="../../../../../">The Wagner </a>
    <nav>
      <ul>
      </ul>
    </nav>
  </header><!-- /#banner -->

<article>
  <header>
    <h1 class="entry-title">
      <a href="../../../../../blog/2013/08/09/my-blogging-workflow-with-git/" rel="bookmark"
         title="Permalink to My blogging workflow with git">My blogging workflow with&nbsp;git</a></h1>
  </header>

  <div class="entry-content">
<p class="post-info">
        <time class="published" datetime="2013-08-09T00:00:00+02:00">Fri 09 August 2013</time>
        <span class="vcard author">
            <a class="url fn" href="../../../../../author/david-wagner.html">David Wagner</a>
        </span>
</p><!-- /.post-info -->    <p>This is a description of my <a class="reference external" href="http://git-scm.org">git</a> workflow for writing blog posts.  I will use this very post as an example and explain in detail how it was&nbsp;made.</p>
<div class="section" id="start-a-new-topical-branch">
<h2>Start a new topical&nbsp;branch</h2>
<p>I create a topical branch named <tt class="docutils literal">workflow</tt> (because I&#8217;m working on a post about my workflow) from the <tt class="docutils literal">master</tt> branch</p>
<div class="highlight"><pre><span></span>$ git checkout -b workflow
</pre></div>
<p>I edit the file <tt class="docutils literal"><span class="pre">content/2013-08-09-Git-workflow.rst</span></tt> and start writing the post.  When I have enough typing for the day I commit the&nbsp;changes:</p>
<div class="highlight"><pre><span></span>$ git add content/tech/2013-08-09-Git-workflow.rst
$ git commit -m <span class="s1">&#39;Add post: Git workflow.&#39;</span>
</pre></div>
<p>It rarely happens that I finish a post in one go.  When I feel like writing more I make some modifications (still on the <tt class="docutils literal">workflow</tt> branch) and commit&nbsp;them:</p>
<div class="highlight"><pre><span></span>$ git commit -a -m <span class="s1">&#39;Continue workflow post.&#39;</span>
</pre></div>
<p>It typically takes two or three iterations, adding parts, fixing typos, etc. until the post is finished.  In the end the topical branch contains quite a few commits since it was forked off from <tt class="docutils literal">master</tt>:</p>
<div class="highlight"><pre><span></span>$ git log master..
<span class="o">[</span>there may be some more commits here<span class="o">]</span>

commit 4f721af41b2c0d52a8456bb6735ad0f56754ea98
Author: David Wagner
Date:   Fri Aug <span class="m">9</span> <span class="m">10</span>:44:58 <span class="m">2013</span> +0200

    git log output.

commit f77de095d0d5225a566782c52133be7f65166016
Author: David Wagner
Date:   Fri Aug <span class="m">9</span> <span class="m">10</span>:44:30 <span class="m">2013</span> +0200

    Add summary.

commit e332a4b53c8cdd94f3117a949a99367b56a8bc6e
Author: David Wagner
Date:   Fri Aug <span class="m">9</span> <span class="m">10</span>:39:38 <span class="m">2013</span> +0200

    Add post: Git workflow.
</pre></div>
</div>
<div class="section" id="rebase-on-master-and-squash-commits">
<h2>Rebase on master and squash&nbsp;commits</h2>
<p>I want to &#8220;compress&#8221; all these into one single commit, since there&#8217;s no point having commits in the <tt class="docutils literal">master</tt> branch with messages such as &#8220;Add summary&#8221;, &#8220;Fix typo.&#8221;, &#8220;Continue this and that.&#8221;.  In git&#8217;s words this is called interactive&nbsp;rebasing.</p>
<div class="highlight"><pre><span></span>$ git rebase -i master
</pre></div>
<p>This pops up <tt class="docutils literal">$<span class="caps">EDITOR</span></tt> with a file to edit the rebase&nbsp;plan:</p>
<div class="highlight"><pre><span></span>pick e332a4b Add post: Git workflow.
pick f77de09 Add summary.
pick 4f721af git log output.

<span class="c1"># Rebase 6ed71cf..9be73d2 onto 6ed71cf</span>
<span class="c1">#</span>
<span class="c1"># Commands:</span>
<span class="c1">#  p, pick = use commit</span>
<span class="c1">#  r, reword = use commit, but edit the commit message</span>
<span class="c1">#  e, edit = use commit, but stop for amending</span>
<span class="c1">#  s, squash = use commit, but meld into previous commit</span>
<span class="c1">#  f, fixup = like &quot;squash&quot;, but discard this commit&#39;s log message</span>
<span class="c1">#  x, exec = run command (the rest of the line) using shell</span>
<span class="c1">#</span>
<span class="c1"># These lines can be re-ordered; they are executed from top to bottom.</span>
<span class="c1">#</span>
<span class="c1"># If you remove a line here THAT COMMIT WILL BE LOST.</span>
<span class="c1"># However, if you remove everything, the rebase will be aborted.</span>
<span class="c1">#</span>
</pre></div>
<p>The comments explain very clearly what I need to do: I modify the file to contain the following (omitting the&nbsp;comments):</p>
<pre class="literal-block">
pick e332a4b Add post: Git workflow.
squash f77de09 Add summary.
squash 4f721af git log output.
</pre>
<p>When the file is saved, I exit from the editor.  Git starts the rebase offering to edit the commit message for each posts to remain, then finally&nbsp;reporting:</p>
<pre class="literal-block">
[...]
Successfully rebased and updated refs/heads/workflow.
</pre>
</div>
<div class="section" id="merge-into-master-and-publish">
<h2>Merge into master and&nbsp;publish</h2>
<p>Now I switch back to <tt class="docutils literal">master</tt> and merge, then delete the topical&nbsp;branch:</p>
<div class="highlight"><pre><span></span>$ git checkout master
$ git merge workflow
$ git branch -d workflow
</pre></div>
<p>The new post is ready, the blog can be regenerated and&nbsp;published.</p>
</div>
<div class="section" id="summary">
<h2>Summary</h2>
<p>In short, I&#8217;m quite pleased with this setup.  Using the combination of git and the <a class="reference external" href="http://docs.getpelican.com">Pelican</a> static blog generator is really easy and has a lot of advantages: I can work on multiple posts at the same time, even offline and publishing is just a matter of a <tt class="docutils literal">git push</tt>.  The above workflow rose naturally, when I became to know enough about git&#8217;s branches and&nbsp;rebasing.</p>
<p>Evidently this whole thing may appear way more complicated than necessary for the faint hearted on Blogger, however this branch juggling turns out to be quite powerful when it&#8217;s about software development in the wild where clean commits and keeping track of changes you make on the codebase are&nbsp;essential.</p>
</div>

  </div><!-- /.entry-content -->

</article>

  <section id="extras" class="body">

    <div class="social">
      <h2>Social</h2>
      <ul>
        <li><a href="https://thewagner.net/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>


      </ul>
    </div><!-- /.social -->
  </section><!-- /#extras -->

  <hr>
    <footer id="contentinfo" class="body">
      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>
      <br />
      The contents of this website is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
    </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-42971359-1', 'auto');
    ga('send', 'pageview');
    </script>
</body>
</html>